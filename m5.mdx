



# <kbd>module</kbd> `datasetsforecast.m5`






---



## <kbd>class</kbd> `M5`
M5(source_url: str = 'https://github.com/Nixtla/m5-forecasts/raw/main/datasets/m5.zip') 



### <kbd>method</kbd> `__init__`

```python
__init__(
    source_url: str = 'https://github.com/Nixtla/m5-forecasts/raw/main/datasets/m5.zip'
) → None
```








---



### <kbd>method</kbd> `download`

```python
download(directory: str) → None
```

Downloads M5 Competition Dataset. 



**Args:**
 
 - <b>`directory`</b> (str):  Directory path to download dataset. 

---



### <kbd>method</kbd> `load`

```python
load(
    directory: str,
    cache: bool = True
) → Tuple[DataFrame, DataFrame, DataFrame]
```

Downloads and loads M5 data. 



**Args:**
 
 - <b>`directory`</b> (str):  Directory where data will be downloaded. 
 - <b>`cache`</b> (bool):  If `True` saves and loads. 



**Returns:**
 Tuple[pd.DataFrame, pd.DataFrame, pd.DataFrame]:  Target time series with columns ['unique_id', 'ds', 'y'],  Exogenous time series with columns ['unique_id', 'ds', 'y'],  Static exogenous variables with columns ['unique_id', 'ds']  and static variables. 


---



## <kbd>class</kbd> `M5Evaluation`







---



### <kbd>method</kbd> `aggregate_levels`

```python
aggregate_levels(y_hat: DataFrame, categories: DataFrame = None) → DataFrame
```

Aggregates the 30_480 series to get 42_840. 



**Args:**
 
 - <b>`y_hat`</b> (pd.DataFrame):  Forecasts as wide pandas dataframe with columns ['unique_id']. 
 - <b>`categories`</b> (pd.DataFrame, optional):  Categories of M5 dataset (not used).  Defaults to None. 



**Returns:**
 
 - <b>`pd.DataFrame`</b>:  Aggregated forecasts as wide pandas dataframe with columns ['unique_id']. 

---



### <kbd>method</kbd> `evaluate`

```python
evaluate(
    directory: str,
    y_hat: Union[DataFrame, str],
    validation: bool = False
) → DataFrame
```

Evaluates y_hat according to M4 methodology. 



**Args:**
 
 - <b>`directory`</b> (str):  Directory where data will be downloaded. 
 - <b>`validation`</b> (bool):  Wheter perform validation evaluation.  Default False, return test evaluation. 
 - <b>`y_hat`</b> (Union[pd.DataFrame, str]):  Forecasts as wide pandas dataframe with columns  ['unique_id'] and forecasts or  benchmark url from 
 - <b>`https`</b>: //github.com/Nixtla/m5-forecasts/tree/main/forecasts. 



**Returns:**
 
 - <b>`pd.DataFrame`</b>:  DataFrame with columns OWA, SMAPE, MASE  and group as index. 



**Examples:**
 

```python
m5_winner_url = 'https://github.com/Nixtla/m5-forecasts/raw/main/forecasts/0001 YJ_STU.zip'
winner_evaluation = M5Evaluation.evaluate('data', m5_winner_url)

m5_second_place_url = 'https://github.com/Nixtla/m5-forecasts/raw/main/forecasts/0002 Matthias.zip'
m5_second_place_forecasts = M5Evaluation.load_benchmark('data', m5_second_place_url)
second_place_evaluation = M5Evaluation.evaluate('data', m5_second_place_forecasts)
``` 

---



### <kbd>method</kbd> `load_benchmark`

```python
load_benchmark(
    directory: str,
    source_url: Optional[str] = None,
    validation: bool = False
) → ndarray
```

Downloads and loads a bechmark forecasts. 



**Args:**
 
 - <b>`directory`</b> (str):  Directory where data will be downloaded. 
 - <b>`source_url`</b> (str, optional):  Optional benchmark url obtained from 
 - <b>`https`</b>: //github.com/Nixtla/m5-forecasts/tree/master/forecasts. If `None` returns the M5 winner. 
 - <b>`validation`</b> (bool):  Wheter return validation forecasts.  Default False, return test forecasts. 



**Returns:**
 
 - <b>`np.ndarray`</b>:  Numpy array of shape (n_series, horizon). 



**Example:**
 

```python
winner_benchmark = M5Evaluation.load_benchmark('data')
winner_evaluation = M5Evaluation.evaluate('data', winner_benchmark)
``` 


